{"version":3,"file":"globalFilterRowsFn.js","sources":["../../../src/utils/globalFilterRowsFn.ts"],"sourcesContent":["import { TableInstance, Row, RowModel, AnyGenerics } from '../types'\nimport {\n  filterRowModelFromLeafs,\n  filterRowModelFromRoot,\n} from './filterRowsUtils'\n\nexport function globalFilterRowsFn<TGenerics extends AnyGenerics>(\n  instance: TableInstance<TGenerics>,\n  rowModel: RowModel<TGenerics>\n): RowModel<TGenerics> {\n  const globalFilter = instance.getState().globalFilter\n\n  const filterFromLeafRows = instance.options.filterFromLeafRows\n\n  const filterFn = instance.getGlobalFilterFn()\n\n  if (!filterFn) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(`Could not find a valid 'globalFilterType'`)\n    }\n    return rowModel\n  }\n\n  const filterableColumns = instance\n    .getAllLeafColumns()\n    .filter(column => column.getCanGlobalFilter())\n\n  const filterableColumnIds = filterableColumns.map(d => d.id)\n\n  const filterRows = (rows: Row<TGenerics>[]) => {\n    return filterFn(rows, filterableColumnIds, globalFilter)\n  }\n\n  if (filterFromLeafRows) {\n    filterRowModelFromLeafs(rowModel.rows, filterRows, instance)\n  }\n\n  return filterRowModelFromRoot(rowModel.rows, filterRows, instance)\n}\n"],"names":["globalFilterRowsFn","instance","rowModel","globalFilter","getState","filterFromLeafRows","options","filterFn","getGlobalFilterFn","process","env","NODE_ENV","console","warn","filterableColumns","getAllLeafColumns","filter","column","getCanGlobalFilter","filterableColumnIds","map","d","id","filterRows","rows","filterRowModelFromLeafs","filterRowModelFromRoot"],"mappings":";;;;;;;;;;;;;;;;AAMO,SAASA,kBAAT,CACLC,QADK,EAELC,QAFK,EAGgB;AACrB,MAAMC,YAAY,GAAGF,QAAQ,CAACG,QAAT,GAAoBD,YAAzC;AAEA,MAAME,kBAAkB,GAAGJ,QAAQ,CAACK,OAAT,CAAiBD,kBAA5C;AAEA,MAAME,QAAQ,GAAGN,QAAQ,CAACO,iBAAT,EAAjB;;AAEA,MAAI,CAACD,QAAL,EAAe;AACb,QAAIE,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCC,MAAAA,OAAO,CAACC,IAAR;AACD;;AACD,WAAOX,QAAP;AACD;;AAED,MAAMY,iBAAiB,GAAGb,QAAQ,CAC/Bc,iBADuB,GAEvBC,MAFuB,CAEhB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACC,kBAAP,EAAJ;AAAA,GAFU,CAA1B;AAIA,MAAMC,mBAAmB,GAAGL,iBAAiB,CAACM,GAAlB,CAAsB,UAAAC,CAAC;AAAA,WAAIA,CAAC,CAACC,EAAN;AAAA,GAAvB,CAA5B;;AAEA,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,IAAD,EAA4B;AAC7C,WAAOjB,QAAQ,CAACiB,IAAD,EAAOL,mBAAP,EAA4BhB,YAA5B,CAAf;AACD,GAFD;;AAIA,MAAIE,kBAAJ,EAAwB;AACtBoB,IAAAA,uCAAuB,CAACvB,QAAQ,CAACsB,IAAV,EAAgBD,UAAhB,EAA4BtB,QAA5B,CAAvB;AACD;;AAED,SAAOyB,sCAAsB,CAACxB,QAAQ,CAACsB,IAAV,EAAgBD,UAAhB,EAA4BtB,QAA5B,CAA7B;AACD;;;;"}